!function(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t=n();for(var r in t)("object"==typeof exports?exports:e)[r]=t[r]}}(this,(()=>(()=>{"use strict";var e={45:(e,n,t)=>{e.exports=t.p+"08ca4b1d05d61b448ac0.wasm"}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var _=n[r]={exports:{}};return e[r](_,_.exports,t),_.exports}t.m=e,t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.u=e=>e+".js",t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.p="",t.b=self.location+"";var r={};let o,_;t.r(r),t.d(r,{NotarizedSession:()=>fe,NotaryServer:()=>ge,Prover:()=>ue,TlsProof:()=>de,Verifier:()=>be,default:()=>ce});const i=new Array(128).fill(void 0);function a(e){return i[e]}i.push(void 0,null,!0,!1);let s=0,c=null;function u(){return null!==c&&c.buffer===_.memory.buffer||(c=new Uint8Array(_.memory.buffer)),c}const b="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},f=function(e,n){const t=b.encode(e);return n.set(t),{read:e.length,written:t.length}};function d(e,n,t){if(void 0===t){const t=b.encode(e),r=n(t.length,1)>>>0;return u().subarray(r,r+t.length).set(t),s=t.length,r}let r=e.length,o=n(r,1)>>>0;const _=u();let i=0;for(;i<r;i++){const n=e.charCodeAt(i);if(n>127)break;_[o+i]=n}if(i!==r){0!==i&&(e=e.slice(i)),o=t(o,r,r=i+3*e.length,1)>>>0;const n=u().subarray(o+i,o+r);i+=f(e,n).written,o=t(o,r,i,1)>>>0}return s=i,o}function g(e){return null==e}let w=null;function l(){return null!==w&&w.buffer===_.memory.buffer||(w=new Int32Array(_.memory.buffer)),w}let p=i.length;function y(e){const n=a(e);return function(e){e<132||(i[e]=p,p=e)}(e),n}const h="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};function v(e,n){return e>>>=0,h.decode(u().slice(e,e+n))}function m(e){p===i.length&&i.push(i.length+1);const n=p;return p=i[n],i[n]=e,n}"undefined"!=typeof TextDecoder&&h.decode();let j=null,k=null;function x(e){const n=typeof e;if("number"==n||"boolean"==n||null==e)return`${e}`;if("string"==n)return`"${e}"`;if("symbol"==n){const n=e.description;return null==n?"Symbol":`Symbol(${n})`}if("function"==n){const n=e.name;return"string"==typeof n&&n.length>0?`Function(${n})`:"Function"}if(Array.isArray(e)){const n=e.length;let t="[";n>0&&(t+=x(e[0]));for(let r=1;r<n;r++)t+=", "+x(e[r]);return t+="]",t}const t=/\[object ([^\]]+)\]/.exec(toString.call(e));let r;if(!(t.length>1))return toString.call(e);if(r=t[1],"Object"==r)try{return"Object("+JSON.stringify(e)+")"}catch(e){return"Object"}return e instanceof Error?`${e.name}: ${e.message}\n${e.stack}`:r}const z="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>{_.__wbindgen_export_3.get(e.dtor)(e.a,e.b)}));function A(e,n,t,r){const o={a:e,b:n,cnt:1,dtor:t},i=(...e)=>{o.cnt++;const n=o.a;o.a=0;try{return r(n,o.b,...e)}finally{0==--o.cnt?(_.__wbindgen_export_3.get(o.dtor)(n,o.b),z.unregister(o)):o.a=n}};return i.original=o,z.register(i,o,o),i}function O(e,n){_._dyn_core__ops__function__FnMut_____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h55b2cafb95688ebd(e,n)}function S(e,n,t){_._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__hd2e6f08741139974(e,n,m(t))}function R(e,n,t){_._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h6f377bea5980efdf(e,n,m(t))}function T(e,n,t){_._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h71d6551dc02f3cc7(e,n,m(t))}function M(e,n){return e>>>=0,u().subarray(e/1,e/1+n)}function I(e,n){const t=n(1*e.length,1)>>>0;return u().set(e,t/1),s=e.length,t}function W(e,n){try{return e.apply(this,n)}catch(e){_.__wbindgen_exn_store(m(e))}}const E="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>_.__wbg_notarizedsession_free(e>>>0)));class B{static __wrap(e){e>>>=0;const n=Object.create(B.prototype);return n.__wbg_ptr=e,E.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,E.unregister(this),e}free(){const e=this.__destroy_into_raw();_.__wbg_notarizedsession_free(e)}proof(e){try{const r=_.__wbindgen_add_to_stack_pointer(-16);_.notarizedsession_proof(r,this.__wbg_ptr,m(e));var n=l()[r/4+0],t=l()[r/4+1];if(l()[r/4+2])throw y(t);return C.__wrap(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}transcript(){return y(_.notarizedsession_transcript(this.__wbg_ptr))}serialize(){try{const r=_.__wbindgen_add_to_stack_pointer(-16);_.notarizedsession_serialize(r,this.__wbg_ptr);var e=l()[r/4+0],n=l()[r/4+1],t=M(e,n).slice();return _.__wbindgen_free(e,1*n,1),t}finally{_.__wbindgen_add_to_stack_pointer(16)}}static deserialize(e){try{const r=_.__wbindgen_add_to_stack_pointer(-16),o=I(e,_.__wbindgen_malloc),i=s;_.notarizedsession_deserialize(r,o,i);var n=l()[r/4+0],t=l()[r/4+1];if(l()[r/4+2])throw y(t);return B.__wrap(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}}const F="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>_.__wbg_prover_free(e>>>0)));class U{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,F.unregister(this),e}free(){const e=this.__destroy_into_raw();_.__wbg_prover_free(e)}constructor(e){const n=_.prover_new(m(e));return this.__wbg_ptr=n>>>0,this}setup(e){const n=d(e,_.__wbindgen_malloc,_.__wbindgen_realloc),t=s;return y(_.prover_setup(this.__wbg_ptr,n,t))}send_request(e,n){const t=d(e,_.__wbindgen_malloc,_.__wbindgen_realloc),r=s;return y(_.prover_send_request(this.__wbg_ptr,t,r,m(n)))}transcript(){try{const t=_.__wbindgen_add_to_stack_pointer(-16);_.prover_transcript(t,this.__wbg_ptr);var e=l()[t/4+0],n=l()[t/4+1];if(l()[t/4+2])throw y(n);return y(e)}finally{_.__wbindgen_add_to_stack_pointer(16)}}notarize(e){return y(_.prover_notarize(this.__wbg_ptr,m(e)))}reveal(e){return y(_.prover_reveal(this.__wbg_ptr,m(e)))}}const P="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>_.__wbg_tlsproof_free(e>>>0)));class C{static __wrap(e){e>>>=0;const n=Object.create(C.prototype);return n.__wbg_ptr=e,P.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,P.unregister(this),e}free(){const e=this.__destroy_into_raw();_.__wbg_tlsproof_free(e)}serialize(){try{const r=_.__wbindgen_add_to_stack_pointer(-16);_.tlsproof_serialize(r,this.__wbg_ptr);var e=l()[r/4+0],n=l()[r/4+1],t=M(e,n).slice();return _.__wbindgen_free(e,1*n,1),t}finally{_.__wbindgen_add_to_stack_pointer(16)}}static deserialize(e){try{const r=_.__wbindgen_add_to_stack_pointer(-16),o=I(e,_.__wbindgen_malloc),i=s;_.tlsproof_deserialize(r,o,i);var n=l()[r/4+0],t=l()[r/4+1];if(l()[r/4+2])throw y(t);return C.__wrap(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}verify(e){try{const r=this.__destroy_into_raw(),o=_.__wbindgen_add_to_stack_pointer(-16);_.tlsproof_verify(o,r,m(e));var n=l()[o/4+0],t=l()[o/4+1];if(l()[o/4+2])throw y(t);return y(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}}const q="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>_.__wbg_verifier_free(e>>>0)));class D{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,q.unregister(this),e}free(){const e=this.__destroy_into_raw();_.__wbg_verifier_free(e)}constructor(e){const n=_.verifier_new(m(e));return this.__wbg_ptr=n>>>0,this}connect(e){const n=d(e,_.__wbindgen_malloc,_.__wbindgen_realloc),t=s;return y(_.verifier_connect(this.__wbg_ptr,n,t))}verify(){return y(_.verifier_verify(this.__wbg_ptr))}}const $="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>_.__wbg_wbg_rayon_poolbuilder_free(e>>>0)));class L{static __wrap(e){e>>>=0;const n=Object.create(L.prototype);return n.__wbg_ptr=e,$.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,$.unregister(this),e}free(){const e=this.__destroy_into_raw();_.__wbg_wbg_rayon_poolbuilder_free(e)}numThreads(){return _.wbg_rayon_poolbuilder_numThreads(this.__wbg_ptr)>>>0}receiver(){return _.wbg_rayon_poolbuilder_receiver(this.__wbg_ptr)>>>0}build(){_.wbg_rayon_poolbuilder_build(this.__wbg_ptr)}}function N(){const e={wbg:{}};return e.wbg.__wbg_notarizedsession_new=function(e){return m(B.__wrap(e))},e.wbg.__wbindgen_string_get=function(e,n){const t=a(n),r="string"==typeof t?t:void 0;var o=g(r)?0:d(r,_.__wbindgen_malloc,_.__wbindgen_realloc),i=s;l()[e/4+1]=i,l()[e/4+0]=o},e.wbg.__wbindgen_object_drop_ref=function(e){y(e)},e.wbg.__wbindgen_is_object=function(e){const n=a(e);return"object"==typeof n&&null!==n},e.wbg.__wbindgen_error_new=function(e,n){return m(new Error(v(e,n)))},e.wbg.__wbindgen_boolean_get=function(e){const n=a(e);return"boolean"==typeof n?n?1:0:2},e.wbg.__wbindgen_is_bigint=function(e){return"bigint"==typeof a(e)},e.wbg.__wbindgen_number_get=function(e,n){const t=a(n),r="number"==typeof t?t:void 0;(null!==j&&j.buffer===_.memory.buffer||(j=new Float64Array(_.memory.buffer)),j)[e/8+1]=g(r)?0:r,l()[e/4+0]=!g(r)},e.wbg.__wbindgen_in=function(e,n){return a(e)in a(n)},e.wbg.__wbindgen_bigint_from_i64=function(e){return m(e)},e.wbg.__wbindgen_jsval_eq=function(e,n){return a(e)===a(n)},e.wbg.__wbindgen_bigint_from_u64=function(e){return m(BigInt.asUintN(64,e))},e.wbg.__wbindgen_is_undefined=function(e){return void 0===a(e)},e.wbg.__wbindgen_object_clone_ref=function(e){return m(a(e))},e.wbg.__wbindgen_is_string=function(e){return"string"==typeof a(e)},e.wbg.__wbindgen_cb_drop=function(e){const n=y(e).original;return 1==n.cnt--&&(n.a=0,!0)},e.wbg.__wbindgen_string_new=function(e,n){return m(v(e,n))},e.wbg.__wbg_new_abda76e883ba8a5f=function(){return m(new Error)},e.wbg.__wbg_stack_658279fe44541cf6=function(e,n){const t=d(a(n).stack,_.__wbindgen_malloc,_.__wbindgen_realloc),r=s;l()[e/4+1]=r,l()[e/4+0]=t},e.wbg.__wbg_error_f851667af71bcfc6=function(e,n){let t,r;try{t=e,r=n,console.error(v(e,n))}finally{_.__wbindgen_free(t,r,1)}},e.wbg.__wbindgen_number_new=function(e){return m(e)},e.wbg.__wbg_queueMicrotask_481971b0d87f3dd4=function(e){queueMicrotask(a(e))},e.wbg.__wbindgen_link_fc1eedd35dc7e0a6=function(e){const n=d("data:application/javascript,"+encodeURIComponent("onmessage = function (ev) {\n            let [ia, index, value] = ev.data;\n            ia = new Int32Array(ia.buffer);\n            let result = Atomics.wait(ia, index, value);\n            postMessage(result);\n        };\n        "),_.__wbindgen_malloc,_.__wbindgen_realloc),t=s;l()[e/4+1]=t,l()[e/4+0]=n},e.wbg.__wbg_queueMicrotask_3cbae2ec6b6cd3d6=function(e){return m(a(e).queueMicrotask)},e.wbg.__wbindgen_is_function=function(e){return"function"==typeof a(e)},e.wbg.__wbg_waitAsync_5d743fc9058ba01a=function(){return m(Atomics.waitAsync)},e.wbg.__wbg_waitAsync_46d5c36955b71a79=function(e,n,t){return m(Atomics.waitAsync(a(e),n,t))},e.wbg.__wbg_async_19c0400d97cc72fe=function(e){return a(e).async},e.wbg.__wbg_value_571d60108110e917=function(e){return m(a(e).value)},e.wbg.__wbg_timeOrigin_5c8b9e35719de799=function(e){return a(e).timeOrigin},e.wbg.__wbg_performance_a1b8bde2ee512264=function(e){return m(a(e).performance)},e.wbg.__wbg_now_abd80e969af37148=function(e){return a(e).now()},e.wbg.__wbg_debug_5fb96680aecf5dc8=function(e){console.debug(a(e))},e.wbg.__wbg_debug_7d879afce6cf56cb=function(e,n,t,r){console.debug(a(e),a(n),a(t),a(r))},e.wbg.__wbg_error_8e3928cfb8a43e2b=function(e){console.error(a(e))},e.wbg.__wbg_error_696630710900ec44=function(e,n,t,r){console.error(a(e),a(n),a(t),a(r))},e.wbg.__wbg_info_530a29cb2e4e3304=function(e){console.info(a(e))},e.wbg.__wbg_info_80803d9a3f0aad16=function(e,n,t,r){console.info(a(e),a(n),a(t),a(r))},e.wbg.__wbg_warn_63bbae1730aead09=function(e){console.warn(a(e))},e.wbg.__wbg_warn_5d3f783b0bae8943=function(e,n,t,r){console.warn(a(e),a(n),a(t),a(r))},e.wbg.__wbg_instanceof_Blob_83ad3dd4c9c406f0=function(e){let n;try{n=a(e)instanceof Blob}catch(e){n=!1}return n},e.wbg.__wbg_data_3ce7c145ca4fbcdc=function(e){return m(a(e).data)},e.wbg.__wbg_code_bddcff79610894cf=function(e){return a(e).code},e.wbg.__wbg_url_1ac02c9add50c527=function(e,n){const t=d(a(n).url,_.__wbindgen_malloc,_.__wbindgen_realloc),r=s;l()[e/4+1]=r,l()[e/4+0]=t},e.wbg.__wbg_readyState_1c157e4ea17c134a=function(e){return a(e).readyState},e.wbg.__wbg_setonopen_ce7a4c51e5cf5788=function(e,n){a(e).onopen=a(n)},e.wbg.__wbg_setonerror_39a785302b0cd2e9=function(e,n){a(e).onerror=a(n)},e.wbg.__wbg_setonclose_b9929b1c1624dff3=function(e,n){a(e).onclose=a(n)},e.wbg.__wbg_setonmessage_2af154ce83a3dc94=function(e,n){a(e).onmessage=a(n)},e.wbg.__wbg_setbinaryType_b0cf5103cd561959=function(e,n){a(e).binaryType=y(n)},e.wbg.__wbg_new_6c74223c77cfabad=function(){return W((function(e,n){return m(new WebSocket(v(e,n)))}),arguments)},e.wbg.__wbg_newwithstrsequence_9bc178264d955680=function(){return W((function(e,n,t){return m(new WebSocket(v(e,n),a(t)))}),arguments)},e.wbg.__wbg_close_acd9532ff5c093ea=function(){return W((function(e){a(e).close()}),arguments)},e.wbg.__wbg_send_70603dff16b81b66=function(){return W((function(e,n,t){a(e).send(v(n,t))}),arguments)},e.wbg.__wbg_send_d095a7ab85cfc836=function(){return W((function(e,n){a(e).send(a(n))}),arguments)},e.wbg.__wbg_instanceof_Window_f401953a2cf86220=function(e){let n;try{n=a(e)instanceof Window}catch(e){n=!1}return n},e.wbg.__wbg_wasClean_8222e9acf5c5ad07=function(e){return a(e).wasClean},e.wbg.__wbg_code_5ee5dcc2842228cd=function(e){return a(e).code},e.wbg.__wbg_reason_5ed6709323849cb1=function(e,n){const t=d(a(n).reason,_.__wbindgen_malloc,_.__wbindgen_realloc),r=s;l()[e/4+1]=r,l()[e/4+0]=t},e.wbg.__wbg_setonmessage_503809e5bb51bd33=function(e,n){a(e).onmessage=a(n)},e.wbg.__wbg_new_d1187ae36d662ef9=function(){return W((function(e,n){return m(new Worker(v(e,n)))}),arguments)},e.wbg.__wbg_postMessage_7380d10e8b8269df=function(){return W((function(e,n){a(e).postMessage(a(n))}),arguments)},e.wbg.__wbg_crypto_1d1f22824a6a080c=function(e){return m(a(e).crypto)},e.wbg.__wbg_process_4a72847cc503995b=function(e){return m(a(e).process)},e.wbg.__wbg_versions_f686565e586dd935=function(e){return m(a(e).versions)},e.wbg.__wbg_node_104a2ff8d6ea03a2=function(e){return m(a(e).node)},e.wbg.__wbg_require_cca90b1a94a0255b=function(){return W((function(){return m(module.require)}),arguments)},e.wbg.__wbg_msCrypto_eb05e62b530a1508=function(e){return m(a(e).msCrypto)},e.wbg.__wbg_randomFillSync_5c9c955aa56b6049=function(){return W((function(e,n){a(e).randomFillSync(y(n))}),arguments)},e.wbg.__wbg_getRandomValues_3aa56aa6edec874c=function(){return W((function(e,n){a(e).getRandomValues(a(n))}),arguments)},e.wbg.__wbindgen_jsval_loose_eq=function(e,n){return a(e)==a(n)},e.wbg.__wbindgen_as_number=function(e){return+a(e)},e.wbg.__wbg_String_b9412f8799faab3e=function(e,n){const t=d(String(a(n)),_.__wbindgen_malloc,_.__wbindgen_realloc),r=s;l()[e/4+1]=r,l()[e/4+0]=t},e.wbg.__wbg_getwithrefkey_edc2c8960f0f1191=function(e,n){return m(a(e)[a(n)])},e.wbg.__wbg_set_f975102236d3c502=function(e,n,t){a(e)[y(n)]=y(t)},e.wbg.__wbg_get_bd8e338fbd5f5cc8=function(e,n){return m(a(e)[n>>>0])},e.wbg.__wbg_length_cd7af8117672b8b8=function(e){return a(e).length},e.wbg.__wbg_new_16b304a2cfa7ff4a=function(){return m(new Array)},e.wbg.__wbg_newnoargs_e258087cd0daa0ea=function(e,n){return m(new Function(v(e,n)))},e.wbg.__wbg_next_40fc327bfc8770e6=function(e){return m(a(e).next)},e.wbg.__wbg_next_196c84450b364254=function(){return W((function(e){return m(a(e).next())}),arguments)},e.wbg.__wbg_done_298b57d23c0fc80c=function(e){return a(e).done},e.wbg.__wbg_value_d93c65011f51a456=function(e){return m(a(e).value)},e.wbg.__wbg_iterator_2cee6dadfd956dfa=function(){return m(Symbol.iterator)},e.wbg.__wbg_get_e3c254076557e348=function(){return W((function(e,n){return m(Reflect.get(a(e),a(n)))}),arguments)},e.wbg.__wbg_call_27c0f87801dedf93=function(){return W((function(e,n){return m(a(e).call(a(n)))}),arguments)},e.wbg.__wbg_new_72fb9a18b5ae2624=function(){return m(new Object)},e.wbg.__wbg_self_ce0dbfc45cf2f5be=function(){return W((function(){return m(self.self)}),arguments)},e.wbg.__wbg_window_c6fb939a7f436783=function(){return W((function(){return m(window.window)}),arguments)},e.wbg.__wbg_globalThis_d1e6af4856ba331b=function(){return W((function(){return m(globalThis.globalThis)}),arguments)},e.wbg.__wbg_global_207b558942527489=function(){return W((function(){return m(global.global)}),arguments)},e.wbg.__wbg_set_d4638f722068f043=function(e,n,t){a(e)[n>>>0]=y(t)},e.wbg.__wbg_isArray_2ab64d95e09ea0ae=function(e){return Array.isArray(a(e))},e.wbg.__wbg_of_6a70eed8d41f469c=function(e,n,t){return m(Array.of(a(e),a(n),a(t)))},e.wbg.__wbg_push_a5b05aedc7234f9f=function(e,n){return a(e).push(a(n))},e.wbg.__wbg_instanceof_ArrayBuffer_836825be07d4c9d2=function(e){let n;try{n=a(e)instanceof ArrayBuffer}catch(e){n=!1}return n},e.wbg.__wbg_new_132e2fd5dfe036c3=function(e){return m(new ArrayBuffer(e>>>0))},e.wbg.__wbg_call_b3ca7c6051f9bec1=function(){return W((function(e,n,t){return m(a(e).call(a(n),a(t)))}),arguments)},e.wbg.__wbg_instanceof_Map_87917e0a7aaf4012=function(e){let n;try{n=a(e)instanceof Map}catch(e){n=!1}return n},e.wbg.__wbg_isSafeInteger_f7b04ef02296c4d2=function(e){return Number.isSafeInteger(a(e))},e.wbg.__wbg_now_3014639a94423537=function(){return Date.now()},e.wbg.__wbg_entries_95cc2c823b285a09=function(e){return m(Object.entries(a(e)))},e.wbg.__wbg_new_81740750da40724f=function(e,n){try{var t={a:e,b:n};const r=new Promise(((e,n)=>{const r=t.a;t.a=0;try{return function(e,n,t,r){_.wasm_bindgen__convert__closures__invoke2_mut__h0a86b19f1fa78a2d(e,n,m(t),m(r))}(r,t.b,e,n)}finally{t.a=r}}));return m(r)}finally{t.a=t.b=0}},e.wbg.__wbg_resolve_b0083a7967828ec8=function(e){return m(Promise.resolve(a(e)))},e.wbg.__wbg_then_0c86a60e8fcfe9f6=function(e,n){return m(a(e).then(a(n)))},e.wbg.__wbg_buffer_12d079cc21e14bdb=function(e){return m(a(e).buffer)},e.wbg.__wbg_new_8cccba86b0f574cb=function(e){return m(new Int32Array(a(e)))},e.wbg.__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb=function(e,n,t){return m(new Uint8Array(a(e),n>>>0,t>>>0))},e.wbg.__wbg_new_63b92bc8671ed464=function(e){return m(new Uint8Array(a(e)))},e.wbg.__wbg_set_a47bac70306a19a7=function(e,n,t){a(e).set(a(n),t>>>0)},e.wbg.__wbg_length_c20a40f15020d68a=function(e){return a(e).length},e.wbg.__wbg_instanceof_Uint8Array_2b3bbecd033d19f6=function(e){let n;try{n=a(e)instanceof Uint8Array}catch(e){n=!1}return n},e.wbg.__wbg_newwithlength_e9b4878cebadb3d3=function(e){return m(new Uint8Array(e>>>0))},e.wbg.__wbg_subarray_a1f73cd4b5b42fe1=function(e,n,t){return m(a(e).subarray(n>>>0,t>>>0))},e.wbg.__wbindgen_bigint_get_as_i64=function(e,n){const t=a(n),r="bigint"==typeof t?t:void 0;(null!==k&&k.buffer===_.memory.buffer||(k=new BigInt64Array(_.memory.buffer)),k)[e/8+1]=g(r)?BigInt(0):r,l()[e/4+0]=!g(r)},e.wbg.__wbindgen_debug_string=function(e,n){const t=d(x(a(n)),_.__wbindgen_malloc,_.__wbindgen_realloc),r=s;l()[e/4+1]=r,l()[e/4+0]=t},e.wbg.__wbindgen_throw=function(e,n){throw new Error(v(e,n))},e.wbg.__wbindgen_rethrow=function(e){throw y(e)},e.wbg.__wbindgen_module=function(){return m(J.__wbindgen_wasm_module)},e.wbg.__wbindgen_memory=function(){return m(_.memory)},e.wbg.__wbg_startWorkers_2ee336a9694dda13=function(e,n,r){return m(async function(e,n,r){if(0===r.numThreads())throw new Error("num_threads must be > 0.");const _={module:e,memory:n,receiver:r.receiver()};o=await Promise.all(Array.from({length:r.numThreads()},(async()=>{const e=new Worker(new URL(t.p+t.u(377),t.b),{type:void 0});return e.postMessage(_),await new Promise((n=>e.addEventListener("message",n,{once:!0}))),e}))),r.build()}(y(e),y(n),L.__wrap(r)))},e.wbg.__wbindgen_closure_wrapper3391=function(e,n,t){return m(A(e,n,1128,O))},e.wbg.__wbindgen_closure_wrapper3393=function(e,n,t){return m(A(e,n,1128,S))},e.wbg.__wbindgen_closure_wrapper3853=function(e,n,t){return m(A(e,n,1428,R))},e.wbg.__wbindgen_closure_wrapper5184=function(e,n,t){return m(A(e,n,2256,T))},e.wbg.__wbindgen_closure_wrapper5185=function(e,n,t){return m(A(e,n,2256,T))},e}async function J(e,n){if(void 0!==_)return _;void 0===e&&(e=new URL(t(45),t.b));const r=N();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e)),function(e,n){e.wbg.memory=n||new WebAssembly.Memory({initial:99,maximum:16384,shared:!0})}(r,n);const{instance:o,module:i}=await async function(e,n){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,n)}catch(n){if("application/wasm"==e.headers.get("Content-Type"))throw n;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n)}const t=await e.arrayBuffer();return await WebAssembly.instantiate(t,n)}{const t=await WebAssembly.instantiate(e,n);return t instanceof WebAssembly.Instance?{instance:t,module:e}:t}}(await e,r);return function(e,n){return _=e.exports,J.__wbindgen_wasm_module=n,k=null,j=null,w=null,c=null,_.__wbindgen_start(),_}(o,i)}const G=J;function V(e){const n={all:{start:0,end:e.length},info:{start:0,end:e.indexOf("\n")+1},headers:{},lineBreaks:[]};let t="",r=-1,o=0,_=!1;for(let _=0;_<e.length;_++){const a=e.charAt(_);"\r"!==a?"\n"!==a?(-1===r&&(r=_),t+=a):(t="",r=-1,n.lineBreaks.push({start:_,end:_+1})):(i(t,_,o++),n.lineBreaks.push({start:_,end:_+1}))}return i(t,e.length-1,o++),n;function i(e,t,o){try{if(""===e)return void(_=!0);const o=JSON.parse(e);n.body={start:r,end:t},"object"==typeof o&&function(e){K("object"==typeof JSON.parse(e),"json string must be an object");const n=[],t=[],r=[];let o=0,_=0;for(let i=0;i<e.length;i++){const a=e.charAt(i);let s=n[n.length-1];if("object_key"!==(null==s?void 0:s.type))if("object_value_string"!==(null==s?void 0:s.type))if("array"!==(null==s?void 0:s.type)){if("object_value_number"===(null==s?void 0:s.type)){if(","!==a&&"}"!==a){s.data=s.data+a;continue}{s.range[1]=i-1,t.push(n.pop());const e=n.pop();K("object_value"===(null==e?void 0:e.type),"expect stack to be object_value"),e.range[1]=i-1,t.push(e),s=n[n.length-1]}}if("object_value"!==(null==s?void 0:s.type)){if("object"===(null==s?void 0:s.type))switch(a){case"}":s.range[1]=i,t.push(n.pop());continue;case'"':n.push({symbol:'"',type:"object_key",objectId:s.id,id:o++,data:"",range:[i,-1],path:""});continue;case":":n.push({symbol:":",type:"object_value",objectId:s.id,keyId:_,id:o++,range:[i,-1],data:""});continue;default:continue}switch(a){case"{":n.push({symbol:"{",type:"object",id:o++,range:[i,-1]});break;case"[":n.push({symbol:"[",type:"array",id:o++,range:[i,-1],data:""})}}else if("}"===a){s.range[1]=i-1,t.push(n.pop());const e=n.pop();K("object"===(null==e?void 0:e.type),"expect stack to be object"),e.range[1]=i,t.push(e),r.pop()}else","===a?(s.range[1]=i-1,t.push(n.pop()),r.pop()):"{"===a?n.push({symbol:"{",type:"object",id:o++,range:[i,-1]}):"["===a?n.push({symbol:"[",type:"array",id:o++,range:[i,-1],data:""}):'"'===a?n.push({symbol:'"',type:"object_value_string",objectId:s.objectId,valueId:s.id,id:o++,data:"",range:[i,-1],path:""}):/^\d$/.test(a)&&n.push({symbol:'"',type:"object_value_number",objectId:s.objectId,valueId:s.id,id:o++,data:"",range:[i,-1],path:""})}else"]"===a?(s.range[1]=i,t.push(n.pop())):"["===a?n.push({symbol:"[",type:"array",id:o++,range:[i,-1],data:""}):s.data=s.data+a;else if('"'===a){s.range[1]=i,t.push(n.pop());const e=n.pop();K("object_value"===(null==e?void 0:e.type),"expect stack to be object_value"),e.range[1]=i,t.push(e),r.pop()}else s.data=s.data+a;else if('"'===a){s.range[1]=i;const e=n.pop();K("object_key"===e.type),"object_key"===(null==e?void 0:e.type)&&(r.push(e.data),e.path=r.join("."),t.push(e),_=s.id)}else s.data=s.data+a}K(!n.length,"invalid stack length");const i={};for(const e of t)"object_key"===e.type?i[e.id]=Object.assign(Object.assign({},i[e.id]||{}),{path:e.path,start:e.range[0]}):"object_value"===e.type?i[e.keyId]=Object.assign(Object.assign({},i[e.keyId]||{}),{end:e.range[1]+1}):("object"===e.type||"array"===e.type)&&(i[e.id]={start:e.range[0],end:e.range[1]+1});return Object.values(i).map((({path:e,start:n,end:t})=>({path:e,start:n,end:t})))}(e).forEach((e=>{e.path&&(n.json=n.json||{},n.json[e.path]={start:e.start+r,end:e.end+r})}))}catch(i){const[a,s]=e.split(": ");0===o?n.info={start:r,end:t}:!_&&s?(n.headers=n.headers||{},n.headers[a.toLowerCase()]={start:r,end:t}):_&&(n.body={start:r,end:t})}}}function K(e,n="invalid expression"){if(!e)throw new Error(n)}function H(e){return Buffer.from(e).toString("hex")}function Q(e){const n=new Map;return Object.entries(e).forEach((([e,t])=>{var r;n.set(e,(r=t,Buffer.from(r).toJSON().data))})),n}var X,Y,Z,ee,ne,te,re,oe=function(e,n,t,r){return new(t||(t=Promise))((function(o,_){function i(e){try{s(r.next(e))}catch(e){_(e)}}function a(e){try{s(r.throw(e))}catch(e){_(e)}}function s(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,a)}s((r=r.apply(e,n||[])).next())}))},_e=function(e,n,t,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof n?e!==n||!o:!n.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,t):o?o.value=t:n.set(e,t),t},ie=function(e,n,t,r){if("a"===t&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof n?e!==n||!r:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===t?r:"a"===t?r.call(e):r?r.value:n.get(e)};let ae="Info";function se(...e){["Debug","Trace"].includes(ae)&&console.log("tlsn-js DEBUG",...e)}function ce(e){return oe(this,void 0,void 0,(function*(){const{loggingLevel:n="Info",hardwareConcurrency:t=navigator.hardwareConcurrency}=e||{};ae=n;const r=yield G();var o;!function(e){_.init_logging(g(e)?0:m(e))}({level:n,crate_filters:void 0,span_events:void 0}),se("res.memory=",r.memory),se("res.memory.buffer.length=",r.memory.buffer.byteLength),se("DEBUG","initialize thread pool"),yield(o=t,y(_.initThreadPool(o))),se("initialized thread pool")}))}class ue{static notarize(e){return oe(this,void 0,void 0,(function*(){const{url:n,method:t="GET",headers:r={},body:o,maxSentData:_,maxRecvData:i,notaryUrl:a,websocketProxyUrl:s,id:c,commit:u}=e,b=new URL(n).hostname,f=ge.from(a),d=new U({id:c,server_dns:b,max_sent_data:_,max_recv_data:i});yield d.setup(yield f.sessionUrl(_,i)),yield d.send_request(s+`?token=${b}`,{uri:n,method:t,headers:Q(r),body:o});const g=d.transcript(),w=u||{sent:[{start:0,end:g.sent.length}],recv:[{start:0,end:g.recv.length}]},l=yield d.notarize(w);return(yield l.proof(w)).serialize()}))}constructor(e){X.set(this,void 0),Y.set(this,void 0),_e(this,Y,{id:e.id||String(Date.now()),server_dns:e.serverDns,max_recv_data:e.maxRecvData,max_sent_data:e.maxSentData},"f"),_e(this,X,new U(ie(this,Y,"f")),"f")}get id(){return ie(this,Y,"f").id}free(){return oe(this,void 0,void 0,(function*(){return ie(this,X,"f").free()}))}setup(e){return oe(this,void 0,void 0,(function*(){return ie(this,X,"f").setup(e)}))}transcript(){return oe(this,void 0,void 0,(function*(){const e=ie(this,X,"f").transcript(),n=Buffer.from(e.recv).toString(),t=Buffer.from(e.sent).toString();return{recv:n,sent:t,ranges:{recv:V(n),sent:V(t)}}}))}sendRequest(e,n){return oe(this,void 0,void 0,(function*(){const{url:t,method:r="GET",headers:o={},body:_}=n,i=new URL(t).hostname,a=Q(Object.assign({Host:i,Connection:"close"},o)),s=yield ie(this,X,"f").send_request(e,{uri:t,method:r,headers:a,body:_});return se("prover.sendRequest",s),{status:s.status,headers:s.headers.reduce(((e,[n,t])=>(e[n]=Buffer.from(t).toString(),e)),{})}}))}notarize(e){return oe(this,void 0,void 0,(function*(){return H((yield ie(this,X,"f").notarize(e)).serialize())}))}}X=new WeakMap,Y=new WeakMap;class be{constructor(e){Z.set(this,void 0),ee.set(this,void 0),_e(this,Z,e,"f"),_e(this,ee,new D(ie(this,Z,"f")),"f")}get id(){return ie(this,Z,"f").id}verify(){return oe(this,void 0,void 0,(function*(){return ie(this,ee,"f").verify()}))}connect(e){return oe(this,void 0,void 0,(function*(){return ie(this,ee,"f").connect(e)}))}}Z=new WeakMap,ee=new WeakMap;class fe{constructor(e){ne.set(this,void 0),_e(this,ne,B.deserialize(new Uint8Array(Buffer.from(e,"hex"))),"f")}free(){return oe(this,void 0,void 0,(function*(){return ie(this,ne,"f").free()}))}proof(e){return oe(this,void 0,void 0,(function*(){const n=ie(this,ne,"f").proof(e);return console.log(n),H(n.serialize())}))}serialize(){return oe(this,void 0,void 0,(function*(){return H(ie(this,ne,"f").serialize())}))}}ne=new WeakMap;class de{constructor(e){te.set(this,void 0),_e(this,te,C.deserialize(new Uint8Array(Buffer.from(e,"hex"))),"f")}free(){return oe(this,void 0,void 0,(function*(){return ie(this,te,"f").free()}))}serialize(){return oe(this,void 0,void 0,(function*(){return H(ie(this,te,"f").serialize())}))}verify(e,n="*"){return oe(this,void 0,void 0,(function*(){const t=ie(this,te,"f").verify(e),{received:r,received_auth_ranges:o,sent:_}=t,i=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t}(t,["received","received_auth_ranges","sent"]);return Object.assign(Object.assign({},i),{recv_auth_ranges:o,recv:r.reduce(((e,t)=>e+(0===t?n:Buffer.from([t]).toString())),""),sent:_.reduce(((e,t)=>e+(0===t?n:Buffer.from([t]).toString())),"")})}))}}te=new WeakMap;class ge{static from(e){return new ge(e)}constructor(e){re.set(this,void 0),_e(this,re,e,"f")}get url(){return ie(this,re,"f")}publicKey(){return oe(this,void 0,void 0,(function*(){const e=yield fetch(ie(this,re,"f")+"/info"),{publicKey:n}=yield e.json();return K("string"==typeof n&&!!n.length,"invalid public key"),n}))}sessionUrl(e,n){return oe(this,void 0,void 0,(function*(){const t=yield fetch(`${ie(this,re,"f")}/session`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientType:"Websocket",maxRecvData:n,maxSentData:e})}),{sessionId:r}=yield t.json();K("string"==typeof r&&!!r.length,"invalid session id");const o=new URL(ie(this,re,"f")),_="https:"===o.protocol?"wss":"ws",i=o.pathname;return`${_}://${o.host}${"/"===i?"":i}/notarize?sessionId=${r}`}))}}return re=new WeakMap,r})()));
//# sourceMappingURL=lib.js.map